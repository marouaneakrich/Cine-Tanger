# ๐ฌ CineTanger Backend API

ูุธุงู ุญุฌุฒ ุงูุณูููุง ุงููุชูุฏู ููุฏููุฉ ุทูุฌุฑุฉ - Backend API

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ูู Backend API ูุชุทุจูู CineTangerุ ูุธุงู ุญุฌุฒ ุงูุณูููุง ุงูุฐู ูุณูุญ ูููุณุชุฎุฏููู ุจุงูุงุทูุงุน ุนูู ุงูุฃููุงู ูุญุฌุฒ ุงูููุงุนุฏ ูุฅุฏุงุฑุฉ ุงูุญุฌูุฒุงุช.

## ๐๏ธ ุงูุชูููููุฌูุง ุงููุณุชุฎุฏูุฉ

- **Node.js** - ุจูุฆุฉ ุงูุชุดุบูู
- **Express.js** - Framework ููู API
- **Sequelize** - ORM ููุชุนุงูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **PostgreSQL** - ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **Jest** - ุฅุทุงุฑ ุงูุงุฎุชุจุงุฑุงุช
- **Supertest** - ุงุฎุชุจุงุฑ API endpoints

## ๐ ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ
- Node.js (v14 ุฃู ุฃุญุฏุซ)
- PostgreSQL
- npm ุฃู yarn

### ุฎุทูุงุช ุงูุชุซุจูุช

1. **ุชุซุจูุช ุงูุงุนุชูุงุฏูุงุช**
   ```bash
   npm install
   ```

2. **ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช**
   ```bash
   # ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ
   createdb cinetanger
   
   # ุชุดุบูู ุงูู migrations
   npx sequelize-cli db:migrate
   
   # ุฅุฏุฎุงู ุงูุจูุงูุงุช ุงูุฃูููุฉ (ุงุฎุชูุงุฑู)
   npx sequelize-cli db:seed:all
   ```

3. **ุฅุนุฏุงุฏ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ**
   ```bash
   # ูุณุฎ ููู ุงูุจูุฆุฉ
   cp .env.example .env
   
   # ุชุนุฏูู ุงููุชุบูุฑุงุช ุญุณุจ ุงูุฅุนุฏุงุฏ
   DB_HOST=localhost
   DB_PORT=5432
   DB_NAME=cinetanger
   DB_USER=your_username
   DB_PASS=your_password
   PORT=80
   ```

4. **ุชุดุบูู ุงูุฎุงุฏู**
   ```bash
   # ููุทูุฑ ุงูุชุทููุฑ
   npm run dev
   
   # ููุทูุฑ ุงูุฅูุชุงุฌ
   npm start
   ```

## ๐ ุชูุซูู ุงูู API

### ุงูู Endpoints ุงูุฑุฆูุณูุฉ

#### ๐ Health Check
```
GET /
```
- **ุงููุตู:** ุงูุชุญูู ูู ุญุงูุฉ ุงูุฎุงุฏู
- **ุงูุงุณุชุฌุงุจุฉ:** `{"message": "๐ฌ CineTanger API is running"}`

#### ๐ฌ ุงูุฃููุงู (Movies)
```
GET    /api/movies          - ุงูุญุตูู ุนูู ุฌููุน ุงูุฃููุงู
POST   /api/movies          - ุฅุถุงูุฉ ูููู ุฌุฏูุฏ
GET    /api/movies/:id      - ุงูุญุตูู ุนูู ูููู ูุญุฏุฏ
PUT    /api/movies/:id      - ุชุญุฏูุซ ูููู ูุญุฏุฏ
DELETE /api/movies/:id      - ุญุฐู ูููู ูุญุฏุฏ
```

#### ๐ญ ุงูุฌูุณุงุช (Sessions)
```
GET    /api/sessions                    - ุงูุญุตูู ุนูู ุฌููุน ุงูุฌูุณุงุช
POST   /api/sessions                    - ุฅุถุงูุฉ ุฌูุณุฉ ุฌุฏูุฏุฉ
GET    /api/sessions/:id                - ุงูุญุตูู ุนูู ุฌูุณุฉ ูุญุฏุฏุฉ
GET    /api/sessions/movie/:movieId     - ุงูุฌูุณุงุช ุงูุฎุงุตุฉ ุจูููู ูุญุฏุฏ
PUT    /api/sessions/:id                - ุชุญุฏูุซ ุฌูุณุฉ ูุญุฏุฏุฉ
DELETE /api/sessions/:id                - ุญุฐู ุฌูุณุฉ ูุญุฏุฏุฉ
```

#### ๐ซ ุงูุญุฌูุฒุงุช (Reservations)
```
GET    /api/reservations                           - ุงูุญุตูู ุนูู ุฌููุน ุงูุญุฌูุฒุงุช
POST   /api/reservations                           - ุฅูุดุงุก ุญุฌุฒ ุฌุฏูุฏ
GET    /api/reservations/:id                       - ุงูุญุตูู ุนูู ุญุฌุฒ ูุญุฏุฏ
DELETE /api/reservations/:id                       - ุญุฐู ุญุฌุฒ ูุญุฏุฏ
GET    /api/reservations/session/:sessionId         - ุญุฌูุฒุงุช ุฌูุณุฉ ูุญุฏุฏุฉ
GET    /api/reservations/customer/:customerEmail    - ุญุฌูุฒุงุช ุนููู ูุญุฏุฏ
```

#### ๐๏ธ ุงููุงุนุงุช (Rooms)
```
GET    /api/rooms          - ุงูุญุตูู ุนูู ุฌููุน ุงููุงุนุงุช
POST   /api/rooms          - ุฅุถุงูุฉ ูุงุนุฉ ุฌุฏูุฏุฉ
GET    /api/rooms/:id      - ุงูุญุตูู ุนูู ูุงุนุฉ ูุญุฏุฏุฉ
PUT    /api/rooms/:id      - ุชุญุฏูุซ ูุงุนุฉ ูุญุฏุฏุฉ
DELETE /api/rooms/:id      - ุญุฐู ูุงุนุฉ ูุญุฏุฏุฉ
```

### ุฃูุซูุฉ ุนูู ุงูุงุณุชุฎุฏุงู

#### ุฅุถุงูุฉ ูููู ุฌุฏูุฏ
```bash
curl -X POST http://localhost:80/api/movies \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Inception",
    "synopsis": "A thief who steals corporate secrets...",
    "posterUrl": "https://example.com/poster.jpg",
    "duration": 148,
    "rating": 9
  }'
```

#### ุฅูุดุงุก ุญุฌุฒ
```bash
curl -X POST http://localhost:80/api/reservations \
  -H "Content-Type: application/json" \
  -d '{
    "customerName": "Mohammed Ali",
    "customerEmail": "mohammed@example.com",
    "seatNumber": "A5",
    "sessionId": 1
  }'
```

## ๐งช ุงูุงุฎุชุจุงุฑุงุช

### ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
```bash
# ุชุดุบูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช
npm test

# ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช ูู ูุถุน ุงููุฑุงูุจุฉ
npm run test:watch

# ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช ูุน ุชูุงุฑูุฑ ุงูุชุบุทูุฉ
npm run test:coverage
```

### ุฃููุงุน ุงูุงุฎุชุจุงุฑุงุช
- **Unit Tests:** ุงุฎุชุจุงุฑุงุช ุงููุญุฏุงุช ููู Models ูุงูู Services
- **Integration Tests:** ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู ููู API Endpoints
- **Health Checks:** ุงุฎุชุจุงุฑุงุช ุงูุชุญูู ูู ุตุญุฉ ุงูุฎุงุฏู

### ุชุบุทูุฉ ุงูุงุฎุชุจุงุฑุงุช
ูุชู ุฅูุดุงุก ุชูุงุฑูุฑ ุงูุชุบุทูุฉ ูู ูุฌูุฏ `coverage/` ุจุนุฏ ุชุดุบูู `npm run test:coverage`.

## ๐ ูููู ุงููุดุฑูุน

```
backend/
โโโ src/
โ   โโโ controllers/     # Controllers ููุชุนุงูู ูุน ุงูุทูุจุงุช
โ   โโโ models/         # ููุงุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ routes/         # ุชุนุฑูู ุงูู Routes
โ   โโโ services/       # ููุทู ุงูุนูู
โ   โโโ config/         # ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ app.js         # ุฅุนุฏุงุฏ Express app
โโโ tests/             # ูููุงุช ุงูุงุฎุชุจุงุฑุงุช
โโโ package.json       # ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน ูุงูุงุนุชูุงุฏูุงุช
โโโ jest.config.js     # ุฅุนุฏุงุฏุงุช Jest
โโโ .env             # ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ
```

## ๐ง ุงูุฅุนุฏุงุฏุงุช ุงููุชูุฏูุฉ

### ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
ูููู ุชุนุฏูู ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ููู `.env`:

```env
DB_HOST=localhost
DB_PORT=5432
DB_NAME=cinetanger
DB_USER=your_username
DB_PASS=your_password
DB_DIALECT=postgres
```

### ุฅุนุฏุงุฏุงุช ุงูุฎุงุฏู
```env
PORT=80
NODE_ENV=development
```

## ๐จ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

ุงูู API ูุณุชุฎุฏู ุฑููุฒ ุงูุญุงูุฉ ุงูููุงุณูุฉ HTTP:
- `200` - ูุฌุงุญ
- `201` - ุชู ุงูุฅูุดุงุก ุจูุฌุงุญ
- `400` - ุทูุจ ุบูุฑ ุตุงูุญ
- `404` - ุบูุฑ ููุฌูุฏ
- `500` - ุฎุทุฃ ูู ุงูุฎุงุฏู

## ๐ค ุงููุณุงููุฉ

1. Fork ุงููุดุฑูุน
2. ุฅูุดุงุก ูุฑุน ุฌุฏูุฏ (`git checkout -b feature/AmazingFeature`)
3. ุนูู Commit (`git commit -m 'Add some AmazingFeature'`)
4. ุนูู Push (`git push origin feature/AmazingFeature`)
5. ุฅูุดุงุก Pull Request

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช ุชุฑุฎูุต ISC.

## ๐ ุงูุฏุนู

ูุฃู ุงุณุชูุณุงุฑุงุช ุฃู ูุดุงููุ ูุฑุฌู ุงูุชูุงุตู ุนุจุฑ:
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: support@cinetanger.com
- ุฅูุดุงุก Issue ูู GitHub

---

**๐ฌ CineTanger - ุชุฌุฑุจุฉ ุณูููุง ุงุณุชุซูุงุฆูุฉ ูู ุทูุฌุฑุฉ!**
